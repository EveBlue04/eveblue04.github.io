<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/forum.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/forum.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh&quot;&gt;&#10;&lt;head&gt;&#10;  &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;  &lt;title&gt;ICII 2025 - 论坛&lt;/title&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/style.css&quot;&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/nav.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;  &lt;nav class=&quot;navbar&quot;&gt;&#10;    &lt;ul&gt;&#10;      &lt;li&gt;&lt;a href=&quot;index.html&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;icii.html&quot;&gt;ICII Panorama&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;team.html&quot;&gt;Dialogue Gallery&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;forum.html&quot;&gt;Silk Road Forum&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;about.html&quot;&gt;NAU-CHINA's Journey&lt;/a&gt;&lt;/li&gt;&#10;    &lt;/ul&gt;&#10;  &lt;/nav&gt;&#10;  &lt;div id=&quot;danmu-container&quot; style=&quot;position:fixed;left:0;top:0;width:100vw;height:100vh;pointer-events:none;z-index:1000;&quot;&gt;&lt;/div&gt;&#10;  &lt;button id=&quot;show-forum-btn&quot; style=&quot;position:fixed;top:160px;right:40px;z-index:1100;display:block;&quot;&gt;我要评论&lt;/button&gt;&#10;  &lt;main class=&quot;forum-main&quot; style=&quot;display:none;&quot;&gt;&#10;    &lt;h1&gt;论坛&lt;/h1&gt;&#10;&#10;    &lt;h2&gt;常见问题&lt;/h2&gt;&#10;    &lt;div class=&quot;forum-list&quot; id=&quot;forum-list&quot;&gt;&#10;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;forum-ask&quot;&gt;&#10;      &lt;button id=&quot;ask-btn-0&quot;&gt; 问卷提问&lt;/button&gt;&#10;      &lt;button id=&quot;ask-btn&quot;&gt; 邮箱提问&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;p class=&quot;hint&quot;&gt;点击评论以拉起邮箱客户端向我们提问！&lt;/p&gt;&#10;&#10;    &lt;p class=&quot;hint&quot;&gt;click the Ask Button in order to mail us about your questions &amp; comment!&lt;/p&gt;&#10;&#10;&#10;  &lt;/main&gt;&#10;  &lt;script src=&quot;js/forum.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh&quot;&gt;&#10;&lt;head&gt;&#10;  &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;  &lt;title&gt;ICII 2025 - 论坛&lt;/title&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/style.css&quot;&gt;&#10;  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/nav.css&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;  &lt;nav class=&quot;navbar&quot;&gt;&#10;    &lt;ul&gt;&#10;      &lt;li&gt;&lt;a href=&quot;index.html&quot;&gt;Homepage&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;icii.html&quot;&gt;ICII Panorama&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;team.html&quot;&gt;Dialogue Gallery&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;forum.html&quot;&gt;Silk Road Forum&lt;/a&gt;&lt;/li&gt;&#10;      &lt;li&gt;&lt;a href=&quot;about.html&quot;&gt;NAU-CHINA's Journey&lt;/a&gt;&lt;/li&gt;&#10;    &lt;/ul&gt;&#10;  &lt;/nav&gt;&#10;  &lt;div id=&quot;danmu-container&quot; style=&quot;position:fixed;left:0;top:0;width:100vw;height:100vh;pointer-events:none;z-index:1000;&quot;&gt;&lt;/div&gt;&#10;  &lt;button id=&quot;show-forum-btn&quot; style=&quot;position:fixed;top:160px;right:40px;z-index:1100;display:block;&quot;&gt;我要评论&lt;/button&gt;&#10;  &lt;main class=&quot;forum-main&quot; style=&quot;display:none;position:relative;&quot;&gt;&#10;    &lt;button id=&quot;back-btn&quot; style=&quot;position:absolute;left:16px;top:16px;z-index:1200;&quot;&gt;返回&lt;/button&gt;&#10;    &lt;h1&gt;论坛&lt;/h1&gt;&#10;&#10;    &lt;h2&gt;常见问题&lt;/h2&gt;&#10;    &lt;div class=&quot;forum-list&quot; id=&quot;forum-list&quot;&gt;&#10;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;forum-ask&quot;&gt;&#10;      &lt;button id=&quot;ask-btn-0&quot;&gt; 问卷提问&lt;/button&gt;&#10;      &lt;button id=&quot;ask-btn&quot;&gt; 邮箱提问&lt;/button&gt;&#10;      &lt;/div&gt;&#10;    &lt;p class=&quot;hint&quot;&gt;点击评论以拉起邮箱客户端向我们提问！&lt;/p&gt;&#10;&#10;    &lt;p class=&quot;hint&quot;&gt;click the Ask Button in order to mail us about your questions &amp; comment!&lt;/p&gt;&#10;&#10;&#10;  &lt;/main&gt;&#10;  &lt;script src=&quot;js/forum.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/js/forum.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/js/forum.js" />
              <option name="originalContent" value="// 论坛提问+回答占位脚本&#10;const forumList = document.getElementById('forum-list');&#10;const askBtn = document.getElementById('ask-btn');&#10;const questionInput = document.getElementById('forum-question');&#10;const demoAnswers = [&#10;  {q: '传统工艺与现代科技如何结合？', a: '可以通过现代生物技术赋能传统工艺。'},&#10;  {q: 'ICII全景地图如何参与？', a: '请联系组委会报名。'}&#10;];&#10;function renderForum() {&#10;  forumList.innerHTML = '';&#10;  demoAnswers.forEach(item =&gt; {&#10;    const qDiv = document.createElement('div');&#10;    qDiv.className = 'forum-question';&#10;    qDiv.textContent = item.q;&#10;    const aDiv = document.createElement('div');&#10;    aDiv.className = 'forum-answer';&#10;    aDiv.textContent = item.a;&#10;    forumList.appendChild(qDiv);&#10;    forumList.appendChild(aDiv);&#10;  });&#10;}&#10;askBtn.onclick = function() {&#10;  if(questionInput.value.trim()) {&#10;    demoAnswers.unshift({q: questionInput.value, a: '（等待回答）'});&#10;    questionInput.value = '';&#10;    renderForum();&#10;  }&#10;};&#10;if(askBtn) {&#10;  askBtn.onclick = function() {&#10;    const content = questionInput.value.trim();&#10;    window.location.href = 'mailto:your@email.com?subject=ICII论坛提问&amp;body=' + encodeURIComponent(content);&#10;  };&#10;}&#10;renderForum();&#10;&#10;// ======= 全屏弹幕与按钮控制 =======&#10;window.addEventListener('DOMContentLoaded', function() {&#10;  const forumMain = document.querySelector('.forum-main');&#10;  const showForumBtn = document.getElementById('show-forum-btn');&#10;  const danmuContainer = document.getElementById('danmu-container');&#10;&#10;  // 按钮显示修正：确保按钮可见&#10;  if (showForumBtn) {&#10;    showForumBtn.style.display = 'block';&#10;    showForumBtn.style.zIndex = 1100;&#10;  }&#10;  if (danmuContainer) {&#10;    danmuContainer.style.display = 'block';&#10;    danmuContainer.style.zIndex = 1000;&#10;  }&#10;&#10;  // 评论按钮点击后显示主内容，隐藏弹幕和按钮&#10;  if (showForumBtn) {&#10;    showForumBtn.addEventListener('click', function() {&#10;      forumMain.style.display = 'block';&#10;      showForumBtn.style.display = 'none';&#10;      danmuContainer.style.display = 'none';&#10;    });&#10;  }&#10;&#10;  // 返回按钮逻辑&#10;  const backBtn = document.getElementById('back-btn');&#10;  if (backBtn) {&#10;    backBtn.addEventListener('click', function() {&#10;      forumMain.style.display = 'none';&#10;      showForumBtn.style.display = 'block';&#10;      danmuContainer.style.display = 'block';&#10;    });&#10;  }&#10;&#10;  // 全屏弹幕功能&#10;  fetch('comment/comment_list.json')&#10;    .then(res =&gt; res.json())&#10;    .then(comments =&gt; {&#10;      if (!Array.isArray(comments) || comments.length === 0) return;&#10;      const danmuLines = 10; // 屏幕分10行弹幕&#10;      const usedLines = Array(danmuLines).fill(0);&#10;      function launchDanmu(item) {&#10;        // 随机选择一行&#10;        let line;&#10;        let tryCount = 0;&#10;        do {&#10;          line = Math.floor(Math.random() * danmuLines);&#10;          tryCount++;&#10;        } while (usedLines[line] &gt; 0 &amp;&amp; usedLines.some(v=&gt;v===0) &amp;&amp; tryCount &lt; 20);&#10;        usedLines[line]++;&#10;        const danmu = document.createElement('div');&#10;        danmu.textContent = item.user + '：' + item.content;&#10;        danmu.style.position = 'fixed';&#10;        danmu.style.whiteSpace = 'nowrap';&#10;        danmu.style.left = '100vw';&#10;        danmu.style.top = (10 + line * 7 + Math.random()*2) + 'vh';&#10;&#10;        const fontSize = 25 + Math.floor(Math.random() * 15);&#10;        danmu.style.fontSize = fontSize + 'px';&#10;        danmu.style.color = '#fff';&#10;        danmu.style.textShadow = '0 0 2px #000,0 0 8px #000';&#10;        danmu.style.pointerEvents = 'none';&#10;        danmu.style.zIndex = 1001;&#10;        danmuContainer.appendChild(danmu);&#10;        // 动画&#10;        let left = window.innerWidth;&#10;        const speed = 2 + Math.random()*2; // px/帧&#10;        // 鼠标悬浮暂停，移开恢复&#10;        let paused = false;&#10;        danmu.addEventListener('mouseenter', () =&gt; { paused = true; });&#10;        danmu.addEventListener('mouseleave', () =&gt; { paused = false; });&#10;        function animate() {&#10;          if (!paused) left -= speed;&#10;          danmu.style.left = left + 'px';&#10;          if (left &lt; -danmu.offsetWidth) {&#10;            danmuContainer.removeChild(danmu);&#10;            usedLines[line]--;&#10;          } else {&#10;            requestAnimationFrame(animate);&#10;          }&#10;        }&#10;        animate();&#10;      }&#10;      // 循环发射弹幕&#10;      let idx = 0;&#10;      setInterval(() =&gt; {&#10;        launchDanmu(comments[idx]);&#10;        idx = (idx + 1) % comments.length;&#10;      }, 800);&#10;    });&#10;});&#10;" />
              <option name="updatedContent" value="// 论坛提问+回答占位脚本&#10;const forumList = document.getElementById('forum-list');&#10;const askBtn = document.getElementById('ask-btn');&#10;const questionInput = document.getElementById('forum-question');&#10;const demoAnswers = [&#10;  {q: '传统工艺与现代科技如何结合？', a: '可以通过现代生物技术赋能传统工艺。'},&#10;  {q: 'ICII全景地图如何参与？', a: '请联系组委会报名。'}&#10;];&#10;function renderForum() {&#10;  forumList.innerHTML = '';&#10;  demoAnswers.forEach(item =&gt; {&#10;    const qDiv = document.createElement('div');&#10;    qDiv.className = 'forum-question';&#10;    qDiv.textContent = item.q;&#10;    const aDiv = document.createElement('div');&#10;    aDiv.className = 'forum-answer';&#10;    aDiv.textContent = item.a;&#10;    forumList.appendChild(qDiv);&#10;    forumList.appendChild(aDiv);&#10;  });&#10;}&#10;askBtn.onclick = function() {&#10;  if(questionInput.value.trim()) {&#10;    demoAnswers.unshift({q: questionInput.value, a: '（等待回答）'});&#10;    questionInput.value = '';&#10;    renderForum();&#10;  }&#10;};&#10;if(askBtn) {&#10;  askBtn.onclick = function() {&#10;    const content = questionInput.value.trim();&#10;    window.location.href = 'mailto:your@email.com?subject=ICII论坛提问&amp;body=' + encodeURIComponent(content);&#10;  };&#10;}&#10;renderForum();&#10;&#10;// ======= 全屏弹幕与按钮控制 =======&#10;window.addEventListener('DOMContentLoaded', function() {&#10;  const forumMain = document.querySelector('.forum-main');&#10;  const showForumBtn = document.getElementById('show-forum-btn');&#10;  const danmuContainer = document.getElementById('danmu-container');&#10;&#10;  // 按钮显示修正：确保按钮可见&#10;  if (showForumBtn) {&#10;    showForumBtn.style.display = 'block';&#10;    showForumBtn.style.zIndex = 1100;&#10;  }&#10;  if (danmuContainer) {&#10;    danmuContainer.style.display = 'block';&#10;    danmuContainer.style.zIndex = 1000;&#10;  }&#10;&#10;  // 评论按钮点击后显示主内容，隐藏弹幕和按钮&#10;  if (showForumBtn) {&#10;    showForumBtn.addEventListener('click', function() {&#10;      forumMain.style.display = 'block';&#10;      showForumBtn.style.display = 'none';&#10;      danmuContainer.style.display = 'none';&#10;    });&#10;  }&#10;&#10;  // 返回按钮逻辑&#10;  const backBtn = document.getElementById('back-btn');&#10;  if (backBtn) {&#10;    backBtn.addEventListener('click', function() {&#10;      forumMain.style.display = 'none';&#10;      showForumBtn.style.display = 'block';&#10;      danmuContainer.style.display = 'block';&#10;    });&#10;  }&#10;&#10;  // 全屏弹幕功能&#10;  fetch('comment/comment_list.json')&#10;    .then(res =&gt; res.json())&#10;    .then(comments =&gt; {&#10;      if (!Array.isArray(comments) || comments.length === 0) return;&#10;      const danmuLines = 10; // 屏幕分10行弹幕&#10;      const usedLines = Array(danmuLines).fill(0);&#10;      function launchDanmu(item) {&#10;        // 随机选择一行&#10;        let line;&#10;        let tryCount = 0;&#10;        do {&#10;          line = Math.floor(Math.random() * danmuLines);&#10;          tryCount++;&#10;        } while (usedLines[line] &gt; 0 &amp;&amp; usedLines.some(v=&gt;v===0) &amp;&amp; tryCount &lt; 20);&#10;        usedLines[line]++;&#10;        const danmu = document.createElement('div');&#10;        danmu.textContent = item.user + '：' + item.content;&#10;        danmu.style.position = 'fixed';&#10;        danmu.style.whiteSpace = 'nowrap';&#10;        danmu.style.left = '100vw';&#10;        danmu.style.top = (10 + line * 7 + Math.random()*2) + 'vh';&#10;&#10;        const fontSize = 25 + Math.floor(Math.random() * 15);&#10;        danmu.style.fontSize = fontSize + 'px';&#10;        danmu.style.color = '#fff';&#10;        danmu.style.textShadow = '0 0 2px #000,0 0 8px #000';&#10;        danmu.style.pointerEvents = 'auto'; // 允许鼠标事件&#10;        danmu.style.zIndex = 1001;&#10;        danmuContainer.appendChild(danmu);&#10;        // 动画&#10;        let left = window.innerWidth;&#10;        const speed = 2 + Math.random()*2; // px/帧&#10;        // 鼠标悬浮暂停，移开恢复&#10;        let paused = false;&#10;        danmu.addEventListener('mouseenter', () =&gt; { paused = true; });&#10;        danmu.addEventListener('mouseleave', () =&gt; { paused = false; });&#10;        function animate() {&#10;          if (!paused) left -= speed;&#10;          danmu.style.left = left + 'px';&#10;          if (left &lt; -danmu.offsetWidth) {&#10;            danmuContainer.removeChild(danmu);&#10;            usedLines[line]--;&#10;          } else {&#10;            requestAnimationFrame(animate);&#10;          }&#10;        }&#10;        animate();&#10;      }&#10;      // 循环发射弹幕&#10;      let idx = 0;&#10;      setInterval(() =&gt; {&#10;        launchDanmu(comments[idx]);&#10;        idx = (idx + 1) % comments.length;&#10;      }, 800);&#10;    });&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>